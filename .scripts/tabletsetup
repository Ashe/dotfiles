#!/usr/bin/env bash
set -e

# Spit out important info
broadcast() {
  echo $1
  notify-send -u low "Tablet setup" "$1"
}

# Settings that are applied regardless
common() {
  # Force tablet to resize to primary monitor (hardcoded)
  local output="2560x1440+0+0"
  xsetwacom set "Wacom Intuos PT S Pen stylus" MapToOutput ${output}
  echo "Tablet mapped to ${output}."

  # Turn off touch
  xsetwacom set "Wacom Intuos PT S Finger touch" touch off
  echo "Touch disabled."
}

# Default config
standard_mode() {
  broadcast "Tablet set to Standard mode."

  # Reset tablet area to full size
  xsetwacom set "Wacom Intuos PT S Pen stylus" ResetArea
}

# Osu only config
osu_mode() {
  broadcast "Tablet set to Osu mode."

  # Adjust corners of area
  # Max area: (15200, 9500)
  # Max area in 16x9: (15200, 8550)
  xsetwacom set "Wacom Intuos PT S Pen stylus" Area 2500 1406 12700 7144
}

# Change tablet mode depending on argument
case $1 in
  osu)  osu_mode ;;
  *)    standard_mode ;;
esac
common
