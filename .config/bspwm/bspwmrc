#! /bin/sh

# Run startup script
$HOME/.scripts/startup

# Allow keyboard shortcuts
sxhkd &

# Monitor setup
numberOfScreens=12

i=0
n=`bspc query -M | wc -l`  # count number of lines in bspwm's monitor list
per=$(( numberOfScreens / n ))          # number of desktops per monitor
for monitor in `bspc query -M`; do
    bspc monitor $monitor -d `seq $i $(( i + per - 1 ))` 
    # seq is end-inclusive; `seq 1 $((1+2))` returns "1 2 3"
    i=$(( i + per ))
done

# Colours
bspc config normal_border_color \
  $(xrdb -query | grep "bspwm.border-normal" | cut -f 2)
bspc config active_border_color \
  $(xrdb -query | grep "bspwm.border-normal" | cut -f 2)
bspc config focused_border_color \
  $(xrdb -query | grep "bspwm.border-focused" | cut -f 2)

# Window sizing and setup
bspc config border_width          2
bspc config window_gap            15
bspc config top_padding           28

# Change how splits work
bspc config split_ratio           0.5
bspc config borderless_monocle    true
bspc config gapless_monocle       true

bspc config focus_follows_pointer true
bspc config click_to_focus button1

bspc rule -a feh state=floating

# Everything is ready, send notification
notify-send -u low "BSPWM" "Hello $USER, Your computer is ready to use."
